<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=`, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
    <section>
        <img src="./assets/bg.jpg" id="bg" alt="bg">
        <img src="./assets/moon.png" id="moon" alt="moon">
        <img src="./assets/mountain.png" id="mountain" alt="mountain">
        <img src="./assets/road.png" id="road" alt="road">
        <div class="profile-wrapper">
            <h2 id="text">I am Aidos Omurzakov </br> <span>And I'm FrontEnd Developer</span></h2>
            <button id="button" type="button" onclick="smoothScroll(document.getElementById('circle-container'))">
                To my
                Projects
            </button>
        </div>
    </section>
    <div class="container">
        <div id="circle-container">
            <div class="box">
                <div class="percent">
                    <svg>
                        <circle id="circle" cx="70" cy="70" r="70"></circle>
                        <circle cx="70" cy="70" r="70"></circle>
                    </svg>
                    <div class="number">
                        <h2>React</h2>
                    </div>
                </div>

            </div>
            <div class="box">
                <div class="percent">
                    <svg>
                        <circle cx="70" cy="70" r="70"></circle>
                        <circle id="circle" cx="70" cy="70" r="70"></circle>
                    </svg>
                    <div class="number">
                        <h2>Angular</h2>
                    </div>
                </div>

            </div>
            <div class="box">
                <div class="percent">
                    <svg>
                        <circle cx="70" cy="70" r="70"></circle>
                        <circle id="circle" cx="70" cy="70" r="70"></circle>
                    </svg>
                    <div class="number">
                        <h2>HTML & </br> CSS</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        var circleContainer = document.getElementById('circle-container');
        let bg = document.getElementById("bg");
        let moon = document.getElementById("moon");
        let mountain = document.getElementById("mountain");
        let road = document.getElementById("road");
        let text = document.getElementById("text");
        let circle = document.getElementById("circle")
        let button = document.getElementById('button');
        console.log(circleContainer.offsetHeight)


        var isInViewport = function (elem) {
            var bounding = elem.getBoundingClientRect();
            return (
                bounding.top >= 0 &&
                bounding.left >= 0 &&
                bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                bounding.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        };

        window.addEventListener('scroll', function () {
            var value = window.scrollY;
            var h = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
            bg.style.top = value * 0.5 + 'px';
            moon.style.left = -value * 0.5 + 'px';
            mountain.style.top = -value * 0.15 + 'px';
            road.style.top = value * 0.15 + 'px';
            text.style.top = value * 1 + 'px';
            button.style.top = value * 1 + 'px';

            if (isInViewport(circleContainer)) {
                circleContainer.style.visibility = 'visible';
                circleContainer.style.opacity = 1;
            } else {
                circleContainer.style.visibility = 'hidden';
                circleContainer.style.opacity = 0;
                circleContainer.style.transition = 'all 2s';
            }
        })

        window.smoothScroll = function (target) {
            var scrollContainer = target;
            do { //find scroll container
                scrollContainer = scrollContainer.parentNode;
                if (!scrollContainer) return;
                scrollContainer.scrollTop += 1;
            } while (scrollContainer.scrollTop == 0);

            var targetY = 0;
            do { //find the top of target relatively to the container
                if (target == scrollContainer) break;
                targetY += target.offsetTop;
            } while (target = target.offsetParent);

            scroll = function (c, a, b, i) {
                i++; if (i > 30) return;
                c.scrollTop = a + (b - a) / 30 * i;
                setTimeout(function () { scroll(c, a, b, i); }, 5);
            }
            // start scrolling
            scroll(scrollContainer, scrollContainer.scrollTop, targetY, 0);
        }
    </script>
</body>

</html>